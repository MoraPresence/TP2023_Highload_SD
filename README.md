# Поиск
Highload course project

## 1. Тема и целевая аудитория
Поисковая система. Ориентирована на российский рынок.

### Аналоги
- Yandex поиск
- Google поиск
- Mail.ru поиск

### MVP
- Поиск по веб-сайтам
- Поиск по картинкам
- Поиск по видео

### Целевая аудитория
MAU 65.8 млн человек, DAU 26.6 млн человек

Распределение трафика по странам:

| Страна         | Доля пользователей, % |
|----------------|-----------------------|
| Россия         | 83.19                 |
| Нидерланды     | 7.1                   |
| Великобритания | 0.89                  |
| Казахстан      | 0.81                  |
| Грузия         | 0.79                  |
| Другие         | 7.23                  |

## 2. Расчет нагрузки
### Продуктовые метрики
| Метрика            | Значение, млн |
|--------------------|---------------|
| Общая аудитория    | 103.8         |
| Месячная аудитория | 65.8          |
| Дневная аудитория  | 26.6          |

#### Средний размер хранилища пользователя
Каждый пользлватель хранит:
- Историю
- Закладки
- Аватар

Если пользователь в среднем совершает 36.92 поисков по веб сайтов + 15.38 поисков по картинкам + 
9.2 поисков по видео + хранение информации о пользователе(пример аватар ~ 1мб и краткую информацию аккаунта ~ 1мб) + 
закладки (в среднем у человека 30 закладок), то средний размер хранилища пользователя:

36.92*1Кб + 15.38*1Кб + 9.2*1Кб + 1024кб + 1024кб + 30*1Кб = 2Мб

#### Среднее количество действий пользователя по типам в день
| Действие            | Среднее кол-во в день на пользователя |
|---------------------|---------------------------------------|
| Поиск по веб-сайтам | 36.92                                 |
| Поиск по картинкам  | 15.38                                 |
| Поиск по видео      | 9.2                                   |

### Технические метрики
#### Размер хранения в разбивке по типам данных
Всего веб-сайтов: 1.97 млрд
Всего картинок в интернете 36 млрд
Всего видео: 200 млн

Хранить мы будем сслыки. Размер ссылки: 256 байт

| Тип данных | Размер, Тб |
|------------|------------|
| Ссылка     | 9.7        |

#### Сетевой трафик
Пиковое увеличение трафика примем в 2 раза
- Пиковое потребление в теченнии суток : 2 * 26.6 млн чел  * 11 стр * 6 Мб / 86400 сек = 40.6 Гбайт/сек = 325.1 Гбит/сек.
- веб-сайты: 26.6 млн чел * 11 стр * 7 Kб = 1.9 Тб.
- изображения: 26.6 млн чел * 11 стр * 5 Мб = 1395.23 Тб.
- видео: 26.6 млн чел * 11 стр * 30 Мб = 8371.35 Тб.

| Техническая метрика                     | Значение       |
|-----------------------------------------|----------------|
| Пиковое потребление в течении суток     | 325.1 Гбит/сек |
| Суммарный суточный трафик - веб-сайты   | 1.9 Тб         |
| Суммарный суточный трафик - изображения | 1395.23 Тб     |
| Суммарный суточный трафик - видео       | 8371.35 Тб     |

#### RPS в разбивке по типам запросов.
Всего поисковых запросов в день: 1.6 млрд
Формула: Всего запросов * процент поиска во веб-сайтам / время

| Запрос              | RPS   |
|---------------------|-------|
| Поиск по веб-сайтам | 11112 |
| Поиск по картинкам  | 4630  |
| Поиск по видео      | 2778  |

## Список литературы
